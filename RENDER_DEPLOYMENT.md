# Railway System Deployment on Render (SQLite Version)

This guide will help you deploy the Indian Railways Track Fittings Management System on Render.com using SQLite database.

## ðŸš€ Prerequisites

1. **Render Account**: Sign up at [render.com](https://render.com)
2. **GitHub Repository**: Push your code to GitHub

## ðŸ“‹ Deployment Steps

### Step 1: Prepare Your Repository

1. **Push to GitHub**:
   ```bash
   git add .
   git commit -m "Add Render deployment configuration"
   git push origin main
   ```

2. **Verify Files**: Ensure these files are in your repository:
   - `render.yaml` (in root directory)
   - `website/backend/requirements.txt`

### Step 2: Deploy Using Blueprint

1. **Connect GitHub**:
   - Go to [render.com](https://render.com)
   - Click "New +" â†’ "Blueprint"
   - Connect your GitHub repository
   - Select your repository

2. **Deploy Blueprint**:
   - Render will detect the `render.yaml` file
   - Review the services configuration:
     - **Backend Service**: Python web service with SQLite
     - **Frontend Service**: Static site
   - Click "Apply" to create both services

### Step 3: Manual Service Creation (Alternative)

If you prefer manual setup:

#### Create Backend Service:
1. Click "New +" â†’ "Web Service"
2. Connect your GitHub repository
3. Configure:
   - **Name**: `railway-backend`
   - **Environment**: `Python 3`
   - **Build Command**: `cd website/backend && pip install -r requirements.txt`
   - **Start Command**: `cd website/backend && uvicorn app.main:app --host 0.0.0.0 --port $PORT`
   - **Root Directory**: (leave empty - uses root)

#### Create Frontend Service:
1. Click "New +" â†’ "Static Site"
2. Connect your GitHub repository
3. Configure:
   - **Name**: `railway-frontend`
   - **Root Directory**: (leave empty - uses root)
   - **Build Command**: `cd website/frontend && npm install && npm run build`
   - **Publish Directory**: `website/frontend/build`

### Step 4: Environment Variables

The `render.yaml` file automatically configures most environment variables, but you can customize them:

#### Backend Environment Variables:
```bash
DATABASE_URL=sqlite:///./railway_fittings.db
SECRET_KEY=<auto-generated>
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
DEBUG=false
CORS_ORIGINS=https://railway-frontend.onrender.com
ALLOWED_HOSTS=railway-backend.onrender.com
```

#### Frontend Environment Variables:
```bash
REACT_APP_API_URL=https://railway-backend.onrender.com
REACT_APP_APP_NAME=Railway Fittings Management System
```

## ðŸ”§ Configuration Details

### Backend Service
- **Runtime**: Python 3.11
- **Database**: SQLite (file-based, no external database needed)
- **API**: FastAPI with automatic documentation
- **Static Files**: QR codes stored in `/static/qr_codes`

### Frontend Service
- **Runtime**: Static site (React build)
- **Build**: npm install && npm run build
- **Serving**: Static files with client-side routing

### Database
- **Type**: SQLite (embedded database)
- **Location**: `./railway_fittings.db` in backend service
- **Persistence**: Data persists between deployments
- **Backup**: Automatic with service restarts

## ðŸš¨ Troubleshooting

### Common Issues

1. **Build Failures**:
   ```bash
   # Check build logs in Render dashboard
   # Common fixes:
   - Update requirements.txt
   - Check Python version compatibility
   - Verify file paths
   ```

2. **Database Issues**:
   ```bash
   # SQLite database is created automatically
   # Check if static directory exists
   # Verify file permissions
   ```

3. **CORS Issues**:
   ```bash
   # Update CORS_ORIGINS environment variable
   # Include your frontend URL
   ```

4. **Static Files Not Loading**:
   ```bash
   # Check if static directories exist
   # Verify file paths in backend
   # Check nginx configuration
   ```

### Performance Optimization

1. **SQLite Optimization**:
   - Database is file-based and fast for small to medium datasets
   - No connection pooling needed
   - Automatic indexing

2. **Static File Serving**:
   - QR codes served directly from backend
   - Frontend assets cached by CDN

## ðŸ“Š Monitoring

### Health Checks
- **Backend**: `GET /` returns 200 OK
- **Frontend**: Static files serve correctly
- **Database**: SQLite file accessible

### Logs
- View logs in Render dashboard
- Monitor error rates
- Track performance metrics

## ðŸ”’ Security Considerations

### Production Security
1. **Environment Variables**:
   - SECRET_KEY is auto-generated
   - Never commit secrets to repository

2. **CORS Configuration**:
   - Restricted to your frontend domain
   - No wildcard (*) in production

3. **Database Security**:
   - SQLite file is private to the service
   - No external database connections

## ðŸ’° Cost Estimation

### Free Tier
- **Web Services**: 750 hours/month (enough for development)
- **Static Sites**: Unlimited
- **Total Cost**: $0 for development/testing

### Paid Plans
- **Starter**: $7/month per service
- **Standard**: $25/month per service

## ðŸš€ Going Live

1. **Test Everything**:
   - Test all API endpoints
   - Verify frontend functionality
   - Check database operations

2. **Custom Domain** (Optional):
   - Add custom domain in service settings
   - Update CORS_ORIGINS environment variable

3. **Monitor**:
   - Watch for errors
   - Monitor performance
   - Set up alerts

## ðŸ“ž Support

- **Render Documentation**: [render.com/docs](https://render.com/docs)
- **Community Forum**: [community.render.com](https://community.render.com)

---

## ðŸŽ¯ Quick Start Checklist

- [ ] Push code to GitHub
- [ ] Create Render account
- [ ] Deploy using Blueprint
- [ ] Test backend API
- [ ] Test frontend
- [ ] Set up custom domain (optional)
- [ ] Go live!

Your Railway Fittings Management System should now be running on Render with SQLite! ðŸš‚