{"ast":null,"code":"import React from'react';import{useQuery}from'@tanstack/react-query';import{analyticsAPI}from'../services/api';import{BarChart,Bar,XAxis,YAxis,CartesianGrid,Tooltip,ResponsiveContainer}from'recharts';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Analytics=()=>{const{data:vendorPerformance,isLoading}=useQuery({queryKey:['vendor-performance'],queryFn:()=>analyticsAPI.getVendorPerformance().then(res=>res.data)});if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-railway-blue\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border-b border-gray-200 pb-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Analytics\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-600\",children:\"Performance insights and trends\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Vendor Performance\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-64\",children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(BarChart,{data:vendorPerformance,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"vendor_name\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"failure_rate\",fill:\"#dc2626\",name:\"Failure Rate %\"})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Top Performing Vendors\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:vendorPerformance===null||vendorPerformance===void 0?void 0:vendorPerformance.slice(0,5).map((vendor,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:vendor.vendor_name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:vendor.vendor_code})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium text-green-600\",children:[(100-vendor.failure_rate).toFixed(1),\"% Success\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[vendor.total_components,\" components\"]})]})]},vendor.vendor_id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Quality Ratings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:vendorPerformance===null||vendorPerformance===void 0?void 0:vendorPerformance.slice(0,5).map(vendor=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:vendor.vendor_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-900 mr-2\",children:[vendor.quality_rating,\"/5.0\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-16 bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-railway-blue h-2 rounded-full\",style:{width:\"\".concat(vendor.quality_rating/5*100,\"%\")}})})]})]},vendor.vendor_id))})]})]})]});};export default Analytics;","map":{"version":3,"names":["React","useQuery","analyticsAPI","BarChart","Bar","XAxis","YAxis","CartesianGrid","Tooltip","ResponsiveContainer","jsx","_jsx","jsxs","_jsxs","Analytics","data","vendorPerformance","isLoading","queryKey","queryFn","getVendorPerformance","then","res","className","children","width","height","strokeDasharray","dataKey","fill","name","slice","map","vendor","index","vendor_name","vendor_code","failure_rate","toFixed","total_components","vendor_id","quality_rating","style","concat"],"sources":["/home/dharani/Desktop/railway-system/frontend/src/pages/Analytics.tsx"],"sourcesContent":["import React from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { analyticsAPI } from '../services/api';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\n\nconst Analytics: React.FC = () => {\n  const { data: vendorPerformance, isLoading } = useQuery({\n    queryKey: ['vendor-performance'],\n    queryFn: () => analyticsAPI.getVendorPerformance().then(res => res.data),\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-railway-blue\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"border-b border-gray-200 pb-4\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">Analytics</h1>\n        <p className=\"mt-1 text-sm text-gray-600\">Performance insights and trends</p>\n      </div>\n\n      <div className=\"card p-6\">\n        <h2 className=\"text-lg font-medium text-gray-900 mb-4\">Vendor Performance</h2>\n        <div className=\"h-64\">\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\n            <BarChart data={vendorPerformance}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis dataKey=\"vendor_name\" />\n              <YAxis />\n              <Tooltip />\n              <Bar dataKey=\"failure_rate\" fill=\"#dc2626\" name=\"Failure Rate %\" />\n            </BarChart>\n          </ResponsiveContainer>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <div className=\"card p-6\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Top Performing Vendors</h3>\n          <div className=\"space-y-3\">\n            {vendorPerformance?.slice(0, 5).map((vendor: any, index: number) => (\n              <div key={vendor.vendor_id} className=\"flex items-center justify-between\">\n                <div>\n                  <div className=\"text-sm font-medium text-gray-900\">{vendor.vendor_name}</div>\n                  <div className=\"text-xs text-gray-500\">{vendor.vendor_code}</div>\n                </div>\n                <div className=\"text-right\">\n                  <div className=\"text-sm font-medium text-green-600\">\n                    {(100 - vendor.failure_rate).toFixed(1)}% Success\n                  </div>\n                  <div className=\"text-xs text-gray-500\">\n                    {vendor.total_components} components\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"card p-6\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Quality Ratings</h3>\n          <div className=\"space-y-3\">\n            {vendorPerformance?.slice(0, 5).map((vendor: any) => (\n              <div key={vendor.vendor_id} className=\"flex items-center justify-between\">\n                <div className=\"text-sm font-medium text-gray-900\">{vendor.vendor_name}</div>\n                <div className=\"flex items-center\">\n                  <div className=\"text-sm text-gray-900 mr-2\">{vendor.quality_rating}/5.0</div>\n                  <div className=\"w-16 bg-gray-200 rounded-full h-2\">\n                    <div\n                      className=\"bg-railway-blue h-2 rounded-full\"\n                      style={{ width: `${(vendor.quality_rating / 5) * 100}%` }}\n                    ></div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Analytics;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}